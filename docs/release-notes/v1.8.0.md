# SlogColor v1.8.0 Release Notes

## Overview

SlogColor v1.8.0 introduces two minor enhancements that improve the source file information display capabilities of the logging library. This release adds support for colorizing source file output and introduces a new "medium" path mode that displays relative paths from the project root.

## üöÄ New Features

### 1. Source File Colorization

You can now customize the color of source file information in log output using the new `SrcFileColor` option.

**Usage Example**:

```go
opts := slogcolor.DefaultOptions
opts.SrcFileColor = color.New(color.FgCyan, color.Bold)
logger := slog.New(slogcolor.NewHandler(os.Stderr, opts))
logger.Info("This message will have colored source file info")
```

**API Addition**:

- New field `SrcFileColor *color.Color` in the `Options` struct
- Follows the same pattern as other colorizable fields in the library
- Defaults to no color for backward compatibility

### 2. Medium Path Mode

A new `MediumFile` source file mode that displays relative paths from the project root instead of just the filename or full absolute path.

**Usage Example**:

```go
opts := slogcolor.DefaultOptions
opts.SrcFileMode = slogcolor.MediumFile
logger := slog.New(slogcolor.NewHandler(os.Stderr, opts))
logger.Info("Source file will show relative path")
// Output: 2025-09-17 12:07:51 INFO  cmd/server/main.go:42 | Source file will show relative path
```

**API Addition**:

- New constant `MediumFile` in the `SourceFileMode` enumeration
- New helper method `getRelativePath()` for path calculation
- Graceful fallback to full path if relative path cannot be determined

### 3. Combined Features

Both features work seamlessly together:

```go
opts := slogcolor.DefaultOptions
opts.SrcFileMode = slogcolor.MediumFile
opts.SrcFileColor = color.New(color.FgYellow, color.Bold)
logger := slog.New(slogcolor.NewHandler(os.Stderr, opts))
logger.Info("Colorized medium path example")
```

## üìà Enhancements

### Default Behavior Changes

- **Default Source File Mode**: Changed from `ShortFile` to `MediumFile`
  - This provides better context by showing relative paths by default
  - Existing code will automatically benefit from more informative source file display

### Module and Dependencies

- **Module Name**: Updated from `github.com/MatusOllah/slogcolor` to `github.com/geomyidia/slogcolor`
- **Go Version**: Bumped to Go 1.24.4
- **Dependencies Updated**:
  - `github.com/fatih/color` updated to v1.18.0
  - `golang.org/x/sys` updated to v0.25.0

### Documentation

- Added comprehensive design document at `docs/design/medium-source-config.md`
- Updated example code to demonstrate new features
- Enhanced code documentation with proper comments

## üîß Technical Details

### Source File Mode Constants

```go
const (
    Nop        SourceFileMode = iota  // No source file info
    ShortFile                         // filename.go:42
    MediumFile                        // path/to/filename.go:42 (NEW)
    LongFile                          // /full/path/to/filename.go:42
)
```

### Options Struct Changes

```go
type Options struct {
    // ... existing fields ...

    // SrcFileColor is the color of the source file info, default to empty (no color).
    SrcFileColor *color.Color  // NEW FIELD

    // ... other fields ...
}
```

### Handler Enhancements

- Added `getRelativePath()` method for relative path calculation
- Enhanced source file formatting with color support
- Improved error handling for path resolution

## üìã Migration Guide

### For Existing Users

**No Breaking Changes**: This release is fully backward compatible. Existing code will continue to work without modifications.

**Automatic Improvements**: Due to the new default `MediumFile` mode, your logs will automatically show more informative relative paths.

### Adopting New Features

**To maintain previous behavior** (short filenames only):

```go
opts := slogcolor.DefaultOptions
opts.SrcFileMode = slogcolor.ShortFile  // Explicitly set to old default
```

**To add source file coloring**:

```go
opts := slogcolor.DefaultOptions
opts.SrcFileColor = color.New(color.FgBlue)  // Add your preferred color
```

### Import Path Changes

If you were using the previous module name, update your imports:

```go
// Old
import "github.com/MatusOllah/slogcolor"

// New
import "github.com/geomyidia/slogcolor"
```

## ‚ö†Ô∏è Compatibility Notes

- **Go Version**: Requires Go 1.24.4 or later
- **Backward Compatibility**: All existing APIs remain unchanged
- **Thread Safety**: Maintained through existing mutex usage
- **Performance**: Minimal impact from new features
  - Path resolution is cached where possible
  - Color formatting only applied when configured

## üêõ Bug Fixes

- Fixed null pointer handling for color fields
- Improved error handling in path resolution
- Enhanced thread safety for concurrent logging

## üìÅ Files Changed

- `handler.go`: Enhanced with color support and medium path logic
- `options.go`: Added new `SrcFileColor` field and updated defaults
- `sourceFileMode.go`: Added `MediumFile` constant
- `handler_test.go`: Updated import paths
- `example/main.go`: Updated to demonstrate new features
- `go.mod`/`go.sum`: Module name and dependency updates

## üîç Testing

The release includes comprehensive test coverage for:

- Source file colorization in various scenarios
- Medium path mode with different project structures
- Combined feature usage
- Edge cases and error conditions

## üìö References

- [Design Document](../design/medium-source-config.md) - Detailed implementation specifications

---

**Full Changelog**: [fdeedbe...ba9b4d9](https://github.com/geomyidia/slogcolor/compare/fdeedbe...ba9b4d9)
